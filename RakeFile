require 'rubygems'
require 'cucumber'
require 'cucumber/rake/task'


namespace :test do
  Cucumber::Rake::Task.new(:functional) do |t|
    ENV["test-env"] = "one"
    t.profile = "functional"
    env_name = ENV["env"] || "default"
    t.cucumber_opts = "FIG_NEWTON_FILE=#{env_name}.yml"  end

  Cucumber::Rake::Task.new(:integration) do |t|
    ENV["test-env"] = "two"
    t.profile = "integration"
    env_name = ENV["env"] || "default"
    t.cucumber_opts = "FIG_NEWTON_FILE=#{env_name}.yml"
  end

  task :all do
    Rake::Task["features:functional"].invoke
    Rake::Task["features:integration"].invoke
  end

end

task(:default => "test:all")

